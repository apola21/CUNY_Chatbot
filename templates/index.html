<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CUNY AI Assistant - Your Enrollment Guide</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v=2">
</head>
<body>
    <!-- Animated Background Particles -->
    <div class="particles-container">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <div class="container">
        <!-- Enhanced Header with Animations -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-graduation-cap"></i>
                        <div class="icon-glow"></div>
                    </div>
                    <div class="logo-text">
                        <h1>CUNY AI Assistant</h1>
                        <div class="logo-underline"></div>
                    </div>
                </div>
                <p class="subtitle">
                    <span class="typing-text">Your Smart 24/7 Enrollment Guide</span>
                    <span class="cursor">|</span>
                </p>
                <div class="stats-bar">
                    <div class="stat-item">
                        <i class="fas fa-users"></i>
                        <span>275K+ Students</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-university"></i>
                        <span>11 Campuses</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-award"></i>
                        <span>100+ Programs</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content with Enhanced Layout -->
        <main class="main-content">
            <div class="chat-and-sidebar">
                <!-- Enhanced Chat Interface -->
                <div class="chat-container">
                <!-- Modern Chat Header -->
                <div class="chat-header">
                    <div class="chat-info">
                        <div class="bot-avatar">
                            <i class="fas fa-robot"></i>
                            <div class="status-indicator"></div>
                        </div>
                        <div class="chat-details">
                            <h3>CUNY AI Assistant</h3>
                            <span class="status">
                                <span class="status-dot"></span>
                                Online â€¢ Ready to help
                            </span>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button class="action-btn" onclick="toggleDarkMode()" title="Toggle Theme">
                            <i class="fas fa-moon"></i>
                        </button>
                        <button class="clear-chat" onclick="clearChat()" title="Clear Chat">
                            <i class="fas fa-trash"></i>
                            <span>Clear</span>
                        </button>
                    </div>
                </div>

                <!-- Enhanced Chat Messages -->
                <div class="chat-messages" id="chatMessages">
                    <!-- Enhanced Welcome Message -->
                    <div class="message bot-message welcome-message">
                        <div class="message-avatar">
                            <i class="fas fa-robot"></i>
                            <div class="avatar-ring"></div>
                        </div>
                        <div class="message-content">
                            <div class="welcome-header">
                                <h4>ðŸ‘‹ Welcome to CUNY!</h4>
                                <span class="welcome-badge">AI-Powered</span>
                            </div>
                            <p>I'm your intelligent enrollment assistant, powered by advanced AI to provide instant, accurate answers about City University of New York.</p>
                            
                            <div class="capabilities-grid">
                                <div class="capability-item">
                                    <i class="fas fa-graduation-cap"></i>
                                    <span>Admissions & Requirements</span>
                                </div>
                                <div class="capability-item">
                                    <i class="fas fa-dollar-sign"></i>
                                    <span>Tuition & Financial Aid</span>
                                </div>
                                <div class="capability-item">
                                    <i class="fas fa-home"></i>
                                    <span>Campus Life & Housing</span>
                                </div>
                                <div class="capability-item">
                                    <i class="fas fa-book"></i>
                                    <span>Academic Programs</span>
                                </div>
                                <div class="capability-item">
                                    <i class="fas fa-trophy"></i>
                                    <span>Scholarships & Deadlines</span>
                                </div>
                                <div class="capability-item">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>Campus Tours & Events</span>
                                </div>
                            </div>
                            
                            <div class="cta-section">
                                <p><strong>What would you like to explore today?</strong></p>
                                <div class="suggestion-chips">
                                    <span class="chip" onclick="askQuestion('How do I apply to CUNY?')">Apply Now</span>
                                    <span class="chip" onclick="askQuestion('What scholarships are available?')">Scholarships</span>
                                    <span class="chip" onclick="askQuestion('Schedule a campus tour')">Campus Tour</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Typing Indicator (Hidden by default) -->
                    <div class="message bot-message typing-message" id="typingIndicator" style="display: none;">
                        <div class="message-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content typing-content">
                            <div class="typing-indicator">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <span class="typing-text">AI is thinking...</span>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Input Area -->
                <div class="chat-input-container">
                    <div class="input-suggestions" id="inputSuggestions">
                        <div class="suggestion-item" onclick="askQuestion('Tell me about student housing')">
                            <i class="fas fa-home"></i> Student Housing
                        </div>
                        <div class="suggestion-item" onclick="askQuestion('What meal plans are available?')">
                            <i class="fas fa-utensils"></i> Meal Plans
                        </div>
                        <div class="suggestion-item" onclick="askQuestion('How safe is the campus?')">
                            <i class="fas fa-shield-alt"></i> Campus Safety
                        </div>
                    </div>
                    <div class="chat-input-wrapper">
                        <div class="input-container">
                            <input type="text" id="messageInput" placeholder="Ask me anything about CUNY..." 
                                   onkeypress="handleKeyPress(event)" oninput="handleInputChange(event)">
                            <button class="attachment-btn" title="Upload Document">
                                <i class="fas fa-paperclip"></i>
                            </button>
                        </div>
                        <button class="send-button" onclick="sendMessage()" title="Send Message">
                            <i class="fas fa-paper-plane"></i>
                            <div class="send-ripple"></div>
                        </button>
                    </div>
                    <div class="input-footer">
                        <span class="powered-by">
                            <i class="fas fa-robot"></i> Powered by AI â€¢ Always learning to help you better
                        </span>
                    </div>
                </div>
            </div>

            <!-- Quick Questions Section (Moved below chat) -->
            <div class="quick-questions-section">
                <div class="quick-questions-header">
                    <i class="fas fa-bolt"></i>
                    <span>Quick Questions</span>
                    <div class="header-line"></div>
                </div>
                <div class="quick-questions-grid">
                    <button class="quick-question" onclick="askQuestion('What are the admission requirements?')">
                        <div class="question-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <div class="question-content">
                            <span class="question-title">Admission Requirements</span>
                            <span class="question-subtitle">GPA, tests, documents</span>
                        </div>
                        <i class="fas fa-arrow-right question-arrow"></i>
                    </button>
                    <button class="quick-question" onclick="askQuestion('How much is tuition?')">
                        <div class="question-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="question-content">
                            <span class="question-title">Tuition Costs</span>
                            <span class="question-subtitle">Fees & payment plans</span>
                        </div>
                        <i class="fas fa-arrow-right question-arrow"></i>
                    </button>
                    <button class="quick-question" onclick="askQuestion('What scholarships are available?')">
                        <div class="question-icon">
                            <i class="fas fa-award"></i>
                        </div>
                        <div class="question-content">
                            <span class="question-title">Scholarships</span>
                            <span class="question-subtitle">Financial aid options</span>
                        </div>
                        <i class="fas fa-arrow-right question-arrow"></i>
                    </button>
                    <button class="quick-question" onclick="askQuestion('When are the application deadlines?')">
                        <div class="question-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="question-content">
                            <span class="question-title">Important Dates</span>
                            <span class="question-subtitle">Deadlines & schedules</span>
                        </div>
                        <i class="fas fa-arrow-right question-arrow"></i>
                    </button>
                    <button class="quick-question" onclick="askQuestion('What majors are offered?')">
                        <div class="question-icon">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <div class="question-content">
                            <span class="question-title">Academic Programs</span>
                            <span class="question-subtitle">Majors & degrees</span>
                        </div>
                        <i class="fas fa-arrow-right question-arrow"></i>
                    </button>
                    <button class="quick-question" onclick="askQuestion('How do I schedule a campus tour?')">
                        <div class="question-icon">
                            <i class="fas fa-route"></i>
                        </div>
                        <div class="question-content">
                            <span class="question-title">Campus Tours</span>
                            <span class="question-subtitle">Visit & explore</span>
                        </div>
                        <i class="fas fa-arrow-right question-arrow"></i>
                    </button>
                </div>
                </div>

                <!-- Enhanced Sidebar -->
            <div class="sidebar">
                <!-- University Overview -->
                <div class="sidebar-section university-overview">
                    <div class="section-header">
                        <h3><i class="fas fa-university"></i> About CUNY</h3>
                        <div class="cuny-logo">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                    </div>
                    <div class="campus-info" id="campusInfo">
                        <div class="info-card">
                            <div class="info-icon">
                                <i class="fas fa-building"></i>
                            </div>
                            <div class="info-details">
                                <strong>11 Campuses</strong>
                                <span>Across NYC</span>
                            </div>
                        </div>
                        <div class="info-card">
                            <div class="info-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="info-details">
                                <strong>275,000+ Students</strong>
                                <span>Diverse community</span>
                            </div>
                        </div>
                        <div class="info-card">
                            <div class="info-icon">
                                <i class="fas fa-calendar"></i>
                            </div>
                            <div class="info-details">
                                <strong>Founded 1847</strong>
                                <span>175+ years of excellence</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Live Stats -->
                <div class="sidebar-section live-stats">
                    <div class="section-header">
                        <h3><i class="fas fa-chart-line"></i> Live Stats</h3>
                        <span class="live-indicator">LIVE</span>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" data-target="275000">0</div>
                            <div class="stat-label">Total Students</div>
                            <div class="stat-trend">â†— +5.2%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" data-target="100">0</div>
                            <div class="stat-label">Programs</div>
                            <div class="stat-trend">â†— +12</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" data-target="98">0</div>
                            <div class="stat-label">Satisfaction %</div>
                            <div class="stat-trend">â†— +2.1%</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="sidebar-section quick-actions">
                    <div class="section-header">
                        <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                    </div>
                    <div class="action-buttons">
                        <button class="action-button primary" onclick="askQuestion('How do I apply?')">
                            <i class="fas fa-pen"></i>
                            <span>Apply Now</span>
                        </button>
                        <button class="action-button secondary" onclick="askQuestion('Schedule a tour')">
                            <i class="fas fa-route"></i>
                            <span>Campus Tour</span>
                        </button>
                        <button class="action-button secondary" onclick="askQuestion('Financial aid help')">
                            <i class="fas fa-hand-holding-usd"></i>
                            <span>Financial Aid</span>
                        </button>
                    </div>
                </div>

                <!-- Contact & Help -->
                <div class="sidebar-section contact-section">
                    <div class="section-header">
                        <h3><i class="fas fa-headset"></i> Need Help?</h3>
                    </div>
                    <div class="contact-info">
                        <p>Get additional support from our team</p>
                        <div class="contact-options">
                            <a href="https://www.cuny.edu" target="_blank" class="contact-link">
                                <div class="contact-icon">
                                    <i class="fas fa-globe"></i>
                                </div>
                                <div class="contact-details">
                                    <span class="contact-title">Visit Website</span>
                                    <span class="contact-subtitle">CUNY.edu</span>
                                </div>
                                <i class="fas fa-external-link-alt"></i>
                            </a>
                            <a href="tel:+1-800-CUNY-YES" class="contact-link">
                                <div class="contact-icon">
                                    <i class="fas fa-phone"></i>
                                </div>
                                <div class="contact-details">
                                    <span class="contact-title">Call Us</span>
                                    <span class="contact-subtitle">1-800-CUNY-YES</span>
                                </div>
                                <i class="fas fa-phone"></i>
                            </a>
                            <a href="mailto:admissions@cuny.edu" class="contact-link">
                                <div class="contact-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="contact-details">
                                    <span class="contact-title">Email Support</span>
                                    <span class="contact-subtitle">Quick response</span>
                                </div>
                                <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Enhanced Loading Indicator -->
    <div class="loading-indicator" id="loadingIndicator">
        <div class="loading-content">
            <div class="loading-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ball"></div>
            </div>
            <span class="loading-text">AI is analyzing your question...</span>
        </div>
    </div>

    <!-- Notification System -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- Scripts -->
    <script>
        // Force cache refresh
        if (performance.navigation.type === 1) {
            // Page was refreshed, clear any cached CSS
            const links = document.querySelectorAll('link[rel="stylesheet"]');
            links.forEach(link => {
                const href = link.href;
                link.href = href.split('?')[0] + '?v=' + Date.now();
            });
        }
    </script>
    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
</body>
</html>